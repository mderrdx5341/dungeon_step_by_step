(()=>{"use strict";var e={13:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var e=this;this._isBlocked=!1,this.keys=new Map,window.addEventListener("keyup",function(t){e.keys.has(t.code)&&!e._isBlocked&&e.keys.get(t.code)(t)})}return e.prototype.addActionForKey=function(e,t){this.keys.set(e,t)},e.prototype.setBlocked=function(e){this._isBlocked=e},e.prototype.isBlocked=function(){return this._isBlocked},e}();t.default=r},45:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.getName=function(){return"Sword"},e.prototype.getDamage=function(){return 20},e}();t.default=r},51:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=r(45),n=function(){function e(){this._name="player",this._health=1e3,this._damage=20,this._experience=0,this._items=new Map([["weapon",new a.default]])}return e.prototype.getName=function(){return this._name},e.prototype.getDamage=function(){return this._items.get("weapon").getDamage()},e.prototype.getHealth=function(){return this._health},e.prototype.setHealts=function(e){this._health=e},e.prototype.addExperience=function(e){this._experience+=e},e.prototype.getExperience=function(){return this._experience},e.prototype.setDamage=function(e){this._damage=e},e.prototype.getItems=function(){return this._items},e}();t.default=n},75:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.cardGenerator=e,this.cardsLine=[this.cardGenerator.getLine(),this.cardGenerator.getLine(),this.cardGenerator.getLine()]}return e.prototype.getLines=function(){return this.cardsLine},e.prototype.getCardLineUp=function(){return this.getLines()[2].getCards()[1]},e.prototype.getCardLineLeft=function(){return this.getLines()[2].getCards()[0]},e.prototype.getCardLineRight=function(){return this.getLines()[2].getCards()[2]},e.prototype.getFirstLine=function(){return this.cardsLine[0]},e.prototype.update=function(){this.cardsLine[2]=this.cardsLine[1],this.cardsLine[1]=this.cardsLine[0],this.cardsLine[0]=this.generateLine()},e.prototype.generateLine=function(){return this.cardGenerator.getLine()},e}();t.default=r},106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.player=e}return e.prototype.render=function(){var e=document.createElement("div");e.classList="player-panel",this.health=document.createElement("div"),this.health.classList="player-panel__health",this.health.innerHTML="Health: "+this.player.getHealth().toString(),this.damage=document.createElement("div"),this.damage.classList="player-panel__damage",this.damage.innerHTML="Damage: "+this.player.getDamage().toString();var t=document.createElement("div");return t.classList="player-panel__items",t.appendChild(this.renderItems()),e.appendChild(this.health),e.appendChild(this.damage),e.appendChild(t),e},e.prototype.renderItems=function(){return document.createElement("div")},e.prototype.update=function(){this.health.innerHTML="Health: "+this.player.getHealth().toString(),this.damage.innerHTML="Damage: "+this.player.getDamage().toString()},e}();t.default=r},160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardGenerator=t.Step=t.Item=t.Player=t.CardsLine=t.CardsBoard=t.Card=void 0;var a=r(884);t.Card=a.default;var n=r(75);t.CardsBoard=n.default;var i=r(465);t.CardsLine=i.default;var o=r(51);t.Player=o.default;var s=r(45);t.Item=s.default;var d=r(648);t.Step=d.default;var l=r(683);t.CardGenerator=l.default},165:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="Human",this.damage=5,this.health=10}return e.prototype.getName=function(){return this.name},e.prototype.getDamage=function(){return this.damage},e.prototype.getHealth=function(){return this.health},e}();t.default=r},175:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=t.LineCard=t.Keyboard=t.PlayerPanel=t.Player=t.CardsBoard=void 0;var a=r(542);t.CardsBoard=a.default;var n=r(650);t.Player=n.default;var i=r(13);t.Keyboard=i.default;var o=r(311);t.LineCard=o.default;var s=r(753);t.Card=s.default;var d=r(106);t.PlayerPanel=d.default},220:(e,t,r)=>{r.r(t)},289:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=r(732),n=r(160),i=function(){function e(){this.enemies=a.default}return e.prototype.getCard=function(){var e=Math.floor(2*Math.random()),t=this.enemies[e];return new n.Card(t)},e.prototype.getLine=function(){return new n.CardsLine(this.getCard(),this.getCard(),this.getCard())},e}();t.default=i},311:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.lineHtml=document.createElement("div"),this.lineHtml.classList="cards-board__item",this.cards=e}return e.prototype.render=function(){for(var e=0;this.cards.length;e++){var t=this.cards[e],r=document.createElement("div");r.classList="cards-board__item",r.innerHTML=t.getTitle()+"<br>"+t.getDamage(),this.lineHtml.appendChild(r)}return this.lineHtml},e}();t.default=r},465:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){this.cards=[e,t,r]}return e.prototype.getCards=function(){return this.cards},e}();t.default=r},542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=r(175),n=function(){function e(e){var t=this;this.lines=[],this.cardsBoard=e,this.cardsBoardHtml=document.createElement("div"),this.cardsBoardHtml.classList="cards-board",this._animation=!0,this.cardsBoardPanelHtml=document.createElement("div"),this.cardsBoardPanelHtml.classList="cards-board__panel",this.cardsBoardPanelHtml.addEventListener("transitionstart",function(e){t._animation=!1}),this.cardsBoardPanelHtml.addEventListener("transitionend",function(e){"160px"===e.target.style.top&&(t._animation=!1,t.cardsBoardPanelHtml.classList.add("transition-none"),t._animation=!0,t.cardsBoard.update(),t.updateHtml(),t.cardsBoardPanelHtml.prepend(t.lines[0]))}),this.cardsBoardHtml.appendChild(this.cardsBoardPanelHtml)}return e.prototype.isAnimation=function(){return this._animation},e.prototype.render=function(){return this.generateHtml(),this.cardsBoardHtml},e.prototype.newLine=function(){for(var e=0;e<this.lines.length;e++)this.lines[e].style.top=this.getTop(this.lines[e].style.top)+20+140+"px"},e.prototype.generateHtml=function(){for(var e=0,t=0;t<this.cardsBoard.getLines().length;t++){var r=this.cardsBoard.getLines()[t],n=document.createElement("div");n.classList="cards_board__line",n.style.top=e+"px",e+=160;for(var i=0;i<r.getCards().length;i++){var o=r.getCards()[i],s=new a.Card(o);n.appendChild(s.html())}this.lines.push(n),this.cardsBoardPanelHtml.appendChild(n)}},e.prototype.updateHtml=function(){var e=this.cardsBoard.getLines()[0],t=document.createElement("div");t.classList="cards_board__line 0",t.style.top="0px";for(var r=0;r<e.getCards().length;r++){var n=e.getCards()[r],i=new a.Card(n);t.appendChild(i.html())}this.lines[2].remove(),this.lines[2]=this.lines[1],this.lines[1]=this.lines[0],this.lines[0]=t},e.prototype.getTop=function(e){return parseInt(e)||0},e}();t.default=n},546:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="Org",this.damage=10,this.health=30}return e.prototype.getName=function(){return this.name},e.prototype.getDamage=function(){return this.damage},e.prototype.getHealth=function(){return this.health},e}();t.default=r},648:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.player=e,this.stepNumber=0}return e.prototype.useCart=function(e){this.stepNumber+=1,this.player.getDamage()<e.getHealth()&&this.player.setHealts(this.player.getHealth()-e.getDamage()),this.player.getDamage()>e.getHealth()&&(e.getHealth()>6||e.getHealth()),this.player.setDamage(this.player.getDamage()-parseInt(e.getHealth()))},e}();t.default=r},650:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.player=e,this.line="center",this.playerHtml=document.createElement("div"),this.playerHtml.classList="player",this.playerCard=document.createElement("div"),this.playerCard.classList="player__card player__card--center"}return e.prototype.addExperience=function(e){this.player.addExperience(e)},e.prototype.getLinePosition=function(){return this.line},e.prototype.render=function(){return this.update(),this.playerHtml.appendChild(this.playerCard),this.playerHtml},e.prototype.update=function(){this.playerCard.innerHTML=this.player.getName()+"<br>health: "+this.player.getHealth()+"<br>damage: "+this.player.getDamage()+"<br>experience: "+this.player.getExperience()},e.prototype.MoveTo=function(e){return"center"==this.line&&"center"==e?(this.line="center",!0):"right"==this.line&&"center"==e?(this.line="right",!0):"right"==this.line&&"left"==e?(this.line="center",this.moveCenter(),!0):("right"!=this.line||"right"!=e)&&("left"==this.line&&"center"==e?(this.line="left",this.moveLeft(),!0):"left"==this.line&&"right"==e?(this.line="center",this.moveCenter(),!0):("left"!=this.line||"left"!=e)&&("center"==this.line&&"right"==e?(this.line="right",this.moveRight(),!0):"center"==this.line&&"left"==e?(this.line="left",this.moveLeft(),!0):void this.update()))},e.prototype.getLine=function(){return this.line},e.prototype.moveCenter=function(){this.playerCard.classList="player__card player__card--center"},e.prototype.moveRight=function(){this.playerCard.classList="player__card player__card--right"},e.prototype.moveLeft=function(){this.playerCard.classList="player__card player__card--left"},e}();t.default=r},683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.cardRepository=e}return e.prototype.getLine=function(){return this.cardRepository.getLine()},e}();t.default=r},732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=r(165),n=r(546);t.default=[new a.default,new n.default]},753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.card=e}return e.prototype.html=function(){var e=document.createElement("div");return e.classList="cards-board__item",e.innerHTML=this.card.getTitle()+"<br>Health:"+this.card.getHealth()+"<br>Damage:"+this.card.getDamage(),e},e}();t.default=r},883:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardRepository=void 0;var a=r(289);t.CardRepository=a.default},884:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.enemy=e}return e.prototype.getTitle=function(){return this.enemy.getName()},e.prototype.getHealth=function(){return this.enemy.getHealth()},e.prototype.getDamage=function(){return this.enemy.getDamage()},e}();t.default=r}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,r),i.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r(220);var e=r(160),t=r(883),a=r(175),n=function(){function r(r){this.rootNode=document.querySelector(r),this.player=new e.Player,this.playerView=new a.Player(this.player),this.playerPanelView=new a.PlayerPanel(this.player),this.step=new e.Step(this.player),this.cardRepository=new t.CardRepository,this.cardGeneratror=new e.CardGenerator(this.cardRepository),this.cardsBoard=new e.CardsBoard(this.cardGeneratror),this.cardsBoardView=new a.CardsBoard(this.cardsBoard),this.experience=0}return r.prototype.run=function(){var e=this;this.keyboard=new a.Keyboard,this.playerView=new a.Player(this.player),this.keyboard.addActionForKey("ArrowUp",function(t){e.playerCartMoveTo("center")}),this.keyboard.addActionForKey("ArrowRight",function(t){e.playerCartMoveTo("right")}),this.keyboard.addActionForKey("ArrowLeft",function(t){e.playerCartMoveTo("left")}),this.rootNode.appendChild(this.cardsBoardView.render()),this.rootNode.appendChild(this.playerView.render()),this.rootNode.appendChild(this.playerPanelView.render())},r.prototype.playerCartMoveTo=function(e){if(this.playerView.MoveTo(e)&&this.cardsBoardView.isAnimation()){var t=null;"center"==this.playerView.getLine()?t=this.cardsBoard.getCardLineUp():"right"==this.playerView.getLine()?t=this.cardsBoard.getCardLineRight():"left"==this.playerView.getLine()&&(t=this.cardsBoard.getCardLineLeft()),this.step.useCart(t),this.cardsBoardView.newLine()}this.playerView.update(),this.playerPanelView.update()},r.prototype.addExperience=function(e){this.experience+=e},r}();document.addEventListener("DOMContentLoaded",function(){new n("#app").run()})})()})();
//# sourceMappingURL=app.js.map